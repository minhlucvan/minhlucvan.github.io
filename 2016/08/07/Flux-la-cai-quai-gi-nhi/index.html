<!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Minh Luc&#39;s Blog"><title>Flux là cái quái gì nhỉ - Minh Luc&#39;s Blog</title><meta name="author" content="Minh Luc"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Minh Luc","sameAs":["https://github.com/minhlucvan","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/minhlucvan.3","https://plus.google.com/","https://www.linkedin.com/profile/","mailto:luk.mink@gmail.com"],"image":"https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&sh=600&sm=fit&q=70"},"articleBody":"Flux là một kiến trúc cho cho font-end do Faceebook phát triển với mục đích giải quyết chính những vấn đề Facebook gặp phải. Kiến trúc này giúp quản lý các hành động (actions) trạng thái (state) của ứng dụng một cách đồng bộ và dễ tiên đoán (predicable), nhất là với các ứng dụng có cấu trúc phức tạp như Facebook. bài viết này sẽ giới thiệu về Flux cũng như cách hoạt động của nó.Vấn đề mà Flux giải quyếttrước tiên, ta sẽ điểm qua một số vấn đề mà Flux giải quyết. Flux là một mẫu thiết kế để xử lý dữ liệu cho ứng dụng, Flux và React đực phaát triển song song bởi Facebook. Và cũng được thiết kế để sử dụng chung với nhau, dù vậy bạn hoàn toàn có thể dùng Flux mà không cần đến React. Nó được phát triển để giải quết chính những vấn đề mà Facebook đạng gặp phải.Một trong những vấn đề đó chính là bug trong phần thông báo (notification). Khi bạn đăng nhập vào Facebook bạn sẽ nhìn thấy các thông báo trên biểu tượng tin nhắn. rồi bạn click vào biểu tượng tin nhắn nhưng lại không có tin nhắn mới nào cả thông báo tin nhắn mbất đi, bạn lướt linh tinh một lát và lại có thông báo tin nhắn, nhưng khi click vào vấn chả có tin nào mới cả. chỉ là một vòng lặp của bug mà khổng thể giả quết với kiến trúc MVC thông thường.Không chó một vòng lặp bug, mà còn một òng lặp xay ra với Facebook team khi họ cố fix lỗi này và rồi một bg mới lại xuất hiện. một cuộc chiến không có hồi kết gữa dev team và bug.vậy nên Facebook muốn tìm cách để thoát khỏi cái vòng luẩn quẩn này. hộ không chỉ muốn fix bux một lần mà họ muốn một hệ thống dễ tiên đoán hơn và có thể dảm bảo rằng vấn đề được giải quyết một cách triệt để.Bản chất của vấn đềbản chất của vấn đề chính là cách mà luồng dữ liệu chạy qua ứng dụng.Note: đây là những thứ mà tôi thấy được từ bản rút gọn mà họ đã trình bày, nhưng tôi tin chắc reawng kiến trục thục thế sẽ khác đôi chút.Ta có một vài model chịu trách nhiệm nắm giữ dât toàn bộ dữ liệu của ứng dụng để tầng view hiển thị ra.bởi vì người dùng tương tác thông qua view, tầng view đôi khi cần cập nhật vào models thông qua input của người dùng. đôi khi model cũng cần phải cập nhật các model khác.quan trọng nhất, đôi khi một vài hành động sẽ kéo theo một loạt các thay đổi trạng thái khác. có thể hình dung nó như chơi bòng bàn thặt khó để đóán được điể rơi của bóng trên bằn, cũng có thể ra ngoài.trên thực tế nhưng thay đổi này có thể xảy ra không đồng bộ, một thay đổi có thể kéo theo vài thây đổi khác mà không nhất thiết xảy ra đồng thời. Giống như ta ném một rổ bóng bàn cho 2 người chơi vậy bóng bạy khắp nơi và va chặm lẫn nhau.nói chung là thật khó để theo dõi ddataa flow của ứng dụng. 😃Giải pháp: luồng dữ liệu tuyến tính (unidirectional data flow)vì vậy Facebook đã quyết định thử một kiến trúc khác, sao cho luồng dữ liệu chỉ chạy theo một hướng, khi bạn muống thêm một dữ liệu mới, luồng dữ liệu chạy lại từ đầu. 'điều này thực sự rất hay… nhưng có lẽ nó không thực sự đơn giản như sơ đồ trên.nột khi bạn đã hiểu Flux, biểu đồ này mới thực sự rõ ràng, vấn đề ở đây là nếu bạn xem qua docs mới nhất của Flux, tôi không nghĩ ràng biểu đồ này có thể giúp bạn hiểu được, biểu đồ chỉ giúp bạn có được cái nhìn toàn cảnh về hệ thống trức khi bạn đi vào tìn hiểu kỹ hơn từng thành phần của nó.What helped me understand Flux better wasn’t a diagram like this, but instead thinking of the system in terms of different characters working together as a team to achieve a goal. So I want to introduce you to the cast of characters that I have in my head.Hãy tưởng tượng các thành phần hệ thống như các nhân vật làm vệc chung với nhau để đạt được một mục tiêu chung. bây giờ tôi muốn giới thiệu với các bạn những nhân vật tôi đã hình dung ra.giới thiệ các nhân vậttôi sẽ giới thiệu các nhân vật và họ tương tác với nhau như thế nào.Action creator (ông đánh máy)nhân vật đầu tiên của chúng ta chính là action creator, người chịu trách nhiệm cho sinh ra tất cả các action của hệ thống, nơi mà tất cả cá thay đổi và các tương tác phải đi qua. Bất cứ khi nào bạn muốn thay đổi trạng thái hặc thay dổi view bạn phải goi đến ông này.tôi nghĩ về action creator như ông đánh máy fax. mỗi khi bạn muốn gửi tin đi bạ phải đến gặp ông này và bảo ông nội dung muốn gử, người đánh máy sẽ định dạng lại tin nhắn sao cho toàn bộ phần còn lại của hệ thống có thể h ểu được .ông đánh máy sẽ tạo một action bao gồm ám hiệu (type) và một khối dữ liệu (payload). ám hiệu sẽ là mooth trong số ám hiệu mà hệ thống đã ngầm định với nhau từ trước kiểu như MESSAGE_CREATE hay MESSAGE_READ.Actions creator còn có một hiệu ứng phụ nữa, ông này biết tất cả các kiểu action . một dev mới vào tram chỉ cần mở file acrion creator lên là biết tất cả các action của hệ thống .Once it has created the action message, the action creator passes that action off to the dispatcher.khi ông này đánh máy xong, thông điệp sẽ được truyền đến Dispatcher.Dispatcher (thằng đưa thư)Thực chất Dispatcher bao gồm một loạt các đăng ký callback. giống như mông đưa thư, ông này giữ một danh sách các kho có thể nhận tin từu action creator. và chuyên thông điếp đến đó.Ống này làm việc một cách không đồng bộđến tất cá các kho trong hệ thống, nếu bạn muốn thông điệp chir được gửi khi làm xong việc gì khácm bạn có thể quản lý dispatcher thực hiện chức năng này với hàm waitFor().Dispatcher của Flux khác với dispatcher cưa các kiến trúc khác ở chỗ, thông điệp được gửi tới tất cả các kho không phân biệt action type là gì. điều đó có nghĩa tất cả các store đều nhận được cả các thông điệp và phải tự mình lịc xem mình cần nghe thưng thông điệp nào.The store (kho)Tiếp theo là store, store là nơi giữ tất cả các trạng thái của ứng dụng, tất cả các trạng thái thay đổi logic đều nằm trong kho.Store như một nhân viên kiểm soát kho vậy, tất cả các trạng thái phải thay đổi thông qua một củ thể, bạn không thể trực tiếp yêu cầu tahy đổi trạng thái được, đối tượng store sẽ không có setters mà chi có getters thôi. để thay dổi trạng thái bạn cần theo đúng trình tự… bạn cần tạo ra một action bằng acrion creator và gửi đi thông qua dispatcher.Như đã đề cập ở trên, nếu Store đã đăng ký với dispatcher, mọi action sẽ được đến nó. bên trong mỗi store trường là một biểu thức switch phân loại acrion đầu vào thông qua type và thực hiện logic tương ứng. nếu action thuộc loại store quan tâm nó sẽ xứ lý action và trả lại một trạng thái tiếp theo của ứng ụng. nếu không store sẽ bỏ qua action này.Một khi store đã cập nhật trạng thái, nó sẽ tung ra một sự kiện change, thông báo cho controller view rằng trạng thái đã bị thay đổi cần update lại.controller view và viewView chính là giao diện ngưòi dùng, view được dựng dựa trên trạng thái, thể hiện trạng thái tới nhời dùng cũng như nhận tương tác của ngời dùng để tạo ra trạng thái mới.View chỉ là giao diện, nó không hề biết gì về logic của ứng dụng, nó chỉ nhận lấy data và dựng thành giao diện ừng dùng có hể hiểu được (bằng HTML).Controller view làm nhiệm vụ quản lý giữa store và view. Nó nhận lấy thông bao thay đổi trạng thái từ store. tập hợp những thay đổi và truyền trạng thái mới cho tất cả nhưng view nó quản lý.So let’s take a look at how all of these characters work together.Hãy xem qua mọi các thành phần làm việc với nhau thế nào nhé.các thành phần tương tấc như thế nàoSetupđầu tiên là phần setup: ứng đụng đưọc khởi tạo, việc vày chỉ dễn ra một lần.Store thông báo cho dispatcher mỗi khi có trạng thái thay đổi2.rồi controller views yều cầu trạng thái mới nhất từ store.Khi store gửi trạng thái cho controller views, controller views gửi trạng thái tới các view để dựng giao diện.The controller views also ask the stores to keep them notified when state changes.Controller views cũng đăng ký nhận thông báo khi trạng thái thay đổi.Luồng dữ liệuKhi setup xong, ứng dụng sẽ sẵn sàng để nhận tương tác của người dùng, và mỗi khi có tương tác từ người dùng luồng dữ liệu sẽ bắt đầy chạy.sự kiện từ hành từ tương tác sẽ được bắn ra.view thông báo cho action creator chuẩn bị một action mới.action creator tạo ra action dựa trên tương tác và gỉư tới dispatcher.Dispatcher giửi action tới store theo một hàng dợi (FIFO), mỗi store đều được thông báo với mọi action rồi store sẽ quết định có xử lý action hay không, và thay đổi trạng thái dựa vào đó.Một khi trạnh thái đã thay đổi, store gửi thông báo đến các controllers đã đăng ký với nó.những controller views này yêu cầu lấy state mới từ store và tiến hành cập nhật trạng thái mới.Hy vọng bài viết này giúp bạn hiểu hơn về Flux!…link bài viết gốc: tại đây","dateCreated":"2016-08-07T23:53:52+07:00","dateModified":"2019-10-13T22:55:07+07:00","datePublished":"2016-08-07T23:53:52+07:00","description":"Flux là một kiến trúc cho cho font-end do Faceebook phát triển với mục đích giải quyết chính những vấn đề Facebook gặp phải. Kiến trúc này giúp quản lý các hành động (actions) trạng thái (state) của ứng dụng một cách đồng bộ và dễ tiên đoán (predicable), nhất là với các ứng dụng có cấu trúc phức tạp như Facebook. bài viết này sẽ giới thiệu về Flux cũng như cách hoạt động của nó.","headline":"Flux là cái quái gì nhỉ","image":["flux.jpeg","1.png"],"mainEntityOfPage":{"@type":"WebPage","@id":"/2016/08/07/Flux-la-cai-quai-gi-nhi/"},"publisher":{"@type":"Organization","name":"Minh Luc","sameAs":["https://github.com/minhlucvan","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/minhlucvan.3","https://plus.google.com/","https://www.linkedin.com/profile/","mailto:luk.mink@gmail.com"],"image":"https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&sh=600&sm=fit&q=70","logo":{"@type":"ImageObject","url":"https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&sh=600&sm=fit&q=70"}},"url":"/2016/08/07/Flux-la-cai-quai-gi-nhi/","keywords":"framework, javascript, design pattern, Flux, fontend","thumbnailUrl":"flux.jpeg"}</script><meta name="description" content="Flux là một kiến trúc cho cho font-end do Faceebook phát triển với mục đích giải quyết chính những vấn đề Facebook gặp phải. Kiến trúc này giúp quản lý các hành động (actions) trạng thái (state) của ứ"><meta name="keywords" content="framework,javascript,design pattern,Flux,fontend"><meta property="og:type" content="blog"><meta property="og:title" content="Flux là cái quái gì nhỉ"><meta property="og:url" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/index.html"><meta property="og:site_name" content="Minh Luc&#39;s Blog"><meta property="og:description" content="Flux là một kiến trúc cho cho font-end do Faceebook phát triển với mục đích giải quyết chính những vấn đề Facebook gặp phải. Kiến trúc này giúp quản lý các hành động (actions) trạng thái (state) của ứ"><meta property="og:locale" content="vi"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/2.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/3.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/4.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/5.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/6.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/7.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/8.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/9.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/10/png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/11.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/12.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/13.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/14.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/15.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/16.png"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/17.png"><meta property="og:updated_time" content="2019-10-13T15:55:07.663Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Flux là cái quái gì nhỉ"><meta name="twitter:description" content="Flux là một kiến trúc cho cho font-end do Faceebook phát triển với mục đích giải quyết chính những vấn đề Facebook gặp phải. Kiến trúc này giúp quản lý các hành động (actions) trạng thái (state) của ứ"><meta name="twitter:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/2.png"><meta name="twitter:creator" content="@minhlucvan"><meta property="og:image" content="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/flux.jpeg"><meta class="swiftype" name="image" data-type="enum" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/flux.jpeg"><meta property="og:image" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/1.png"><meta class="swiftype" name="image" data-type="enum" content="/2016/08/07/Flux-la-cai-quai-gi-nhi/1.png"><link rel="stylesheet" href="/assets/css/style-vauplnmuudawtrvs9qoe2qiqczrszudvtrtqf2khoqbe0hmw3ovkgnoc5u4n.min.css"></head><body><div id="blog"><header id="header" data-behavior="4"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">Minh Luc&#39;s Blog</a></div><a class="header-right-picture" href="#about" aria-label="Open the link: /#about"><img class="header-picture" src="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70" alt="Author&#39;s picture"></a></header><nav id="sidebar" data-behavior="4"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="Read more about the author"><img class="sidebar-profile-picture" src="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70" alt="Author&#39;s picture"></a><h4 class="sidebar-profile-name">Minh Luc</h4><h5 class="sidebar-profile-bio"><p>author.bio</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" title="Home"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">Home</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/categories" title="Categories"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">Categories</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/tags" title="Tags"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">Tags</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/archives" title="Archives"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">Archives</span></a></li><li class="sidebar-button"><a class="sidebar-button-link open-algolia-search" href="#search" title="Search"><i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i> <span class="sidebar-button-desc">Search</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/about" title="About"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">About</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/minhlucvan" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="http://stackoverflow.com/users" title="Stack Overflow"><i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i> <span class="sidebar-button-desc">Stack Overflow</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://twitter.com/" title="Twitter"><i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i> <span class="sidebar-button-desc">Twitter</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://facebook.com/minhlucvan.3" title="Facebook"><i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i> <span class="sidebar-button-desc">Facebook</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://plus.google.com/" title="Google +"><i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i> <span class="sidebar-button-desc">Google +</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://www.linkedin.com/profile/" title="LinkedIn"><i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i> <span class="sidebar-button-desc">LinkedIn</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto:luk.mink@gmail.com" title="Mail"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">Mail</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/atom.xml" title="RSS"><i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i> <span class="sidebar-button-desc">RSS</span></a></li></ul></div></nav><div class="post-header-cover text-left" style="background-image:url(/2016/08/07/Flux-la-cai-quai-gi-nhi/1.png)" data-behavior="4"></div><div id="main" data-behavior="4" class="hasCover hasCoverMetaOut"><article class="post"><div class="post-header main-content-wrap text-left"><h1 class="post-title">Flux là cái quái gì nhỉ</h1><div class="post-meta"><time datetime="2016-08-07T23:53:52+07:00">Th08 07, 2016 </time><span>in </span><a class="category-link" href="/categories/cong-nghe/">công nghệ</a></div></div><div class="post-content markdown"><div class="main-content-wrap"><p>Flux là một kiến trúc cho cho font-end do Faceebook phát triển với mục đích giải quyết chính những vấn đề Facebook gặp phải. Kiến trúc này giúp quản lý các hành động (actions) trạng thái (state) của ứng dụng một cách đồng bộ và dễ tiên đoán (predicable), nhất là với các ứng dụng có cấu trúc phức tạp như Facebook. bài viết này sẽ giới thiệu về Flux cũng như cách hoạt động của nó.</p><a id="more"></a><h1>Vấn đề mà Flux giải quyết</h1><p>trước tiên, ta sẽ điểm qua một số vấn đề mà Flux giải quyết. Flux là một mẫu thiết kế để xử lý dữ liệu cho ứng dụng, Flux và React đực phaát triển song song bởi Facebook. Và cũng được thiết kế để sử dụng chung với nhau, dù vậy bạn hoàn toàn có thể dùng Flux mà không cần đến React. Nó được phát triển để giải quết chính những vấn đề mà Facebook đạng gặp phải.</p><p><img src="./2.png" alt><br>Một trong những vấn đề đó chính là bug trong phần thông báo (notification). Khi bạn đăng nhập vào Facebook bạn sẽ nhìn thấy các thông báo trên biểu tượng tin nhắn. rồi bạn click vào biểu tượng tin nhắn nhưng lại không có tin nhắn mới nào cả thông báo tin nhắn mbất đi, bạn lướt linh tinh một lát và lại có thông báo tin nhắn, nhưng khi click vào vấn chả có tin nào mới cả. chỉ là một vòng lặp của bug mà khổng thể giả quết với kiến trúc MVC thông thường.</p><p><img src="3.png" alt><br>Không chó một vòng lặp bug, mà còn một òng lặp xay ra với Facebook team khi họ cố fix lỗi này và rồi một bg mới lại xuất hiện. một cuộc chiến không có hồi kết gữa dev team và bug.</p><p>vậy nên Facebook muốn tìm cách để thoát khỏi cái vòng luẩn quẩn này. hộ không chỉ muốn fix bux một lần mà họ muốn một hệ thống dễ tiên đoán hơn và có thể dảm bảo rằng vấn đề được giải quyết một cách triệt để.</p><h1>Bản chất của vấn đề</h1><p>bản chất của vấn đề chính là cách mà luồng dữ liệu chạy qua ứng dụng.</p><p>Note: đây là những thứ mà tôi thấy được từ bản rút gọn mà họ đã trình bày, nhưng tôi tin chắc reawng kiến trục thục thế sẽ khác đôi chút.</p><p><img src="4.png" alt><br>Ta có một vài model chịu trách nhiệm nắm giữ dât toàn bộ dữ liệu của ứng dụng để tầng view hiển thị ra.</p><p>bởi vì người dùng tương tác thông qua view, tầng view đôi khi cần cập nhật vào models thông qua input của người dùng. đôi khi model cũng cần phải cập nhật các model khác.</p><p>quan trọng nhất, đôi khi một vài hành động sẽ kéo theo một loạt các thay đổi trạng thái khác. có thể hình dung nó như chơi bòng bàn thặt khó để đóán được điể rơi của bóng trên bằn, cũng có thể ra ngoài.</p><p><img src="5.png" alt><br>trên thực tế nhưng thay đổi này có thể xảy ra không đồng bộ, một thay đổi có thể kéo theo vài thây đổi khác mà không nhất thiết xảy ra đồng thời. Giống như ta ném một rổ bóng bàn cho 2 người chơi vậy bóng bạy khắp nơi và va chặm lẫn nhau.</p><p>nói chung là thật khó để theo dõi ddataa flow của ứng dụng. 😃</p><h1>Giải pháp: luồng dữ liệu tuyến tính (unidirectional data flow)</h1><p>vì vậy Facebook đã quyết định thử một kiến trúc khác, sao cho luồng dữ liệu chỉ chạy theo một hướng, khi bạn muống thêm một dữ liệu mới, luồng dữ liệu chạy lại từ đầu. '<br><img src="6.png" alt><br>điều này thực sự rất hay… nhưng có lẽ nó không thực sự đơn giản như sơ đồ trên.</p><p>nột khi bạn đã hiểu Flux, biểu đồ này mới thực sự rõ ràng, vấn đề ở đây là nếu bạn xem qua docs mới nhất của Flux, tôi không nghĩ ràng biểu đồ này có thể giúp bạn hiểu được, biểu đồ chỉ giúp bạn có được cái nhìn toàn cảnh về hệ thống trức khi bạn đi vào tìn hiểu kỹ hơn từng thành phần của nó.</p><p>What helped me understand Flux better wasn’t a diagram like this, but instead thinking of the system in terms of different characters working together as a team to achieve a goal. So I want to introduce you to the cast of characters that I have in my head.</p><p>Hãy tưởng tượng các thành phần hệ thống như các nhân vật làm vệc chung với nhau để đạt được một mục tiêu chung. bây giờ tôi muốn giới thiệu với các bạn những nhân vật tôi đã hình dung ra.</p><h1>giới thiệ các nhân vật</h1><p>tôi sẽ giới thiệu các nhân vật và họ tương tác với nhau như thế nào.</p><h2>Action creator (ông đánh máy)</h2><p>nhân vật đầu tiên của chúng ta chính là action creator, người chịu trách nhiệm cho sinh ra tất cả các action của hệ thống, nơi mà tất cả cá thay đổi và các tương tác phải đi qua. Bất cứ khi nào bạn muốn thay đổi trạng thái hặc thay dổi view bạn phải goi đến ông này.</p><p><img src="7.png" alt><br>tôi nghĩ về action creator như ông đánh máy fax. mỗi khi bạn muốn gửi tin đi bạ phải đến gặp ông này và bảo ông nội dung muốn gử, người đánh máy sẽ định dạng lại tin nhắn sao cho toàn bộ phần còn lại của hệ thống có thể h ểu được .</p><p>ông đánh máy sẽ tạo một action bao gồm ám hiệu (type) và một khối dữ liệu (payload). ám hiệu sẽ là mooth trong số ám hiệu mà hệ thống đã ngầm định với nhau từ trước kiểu như MESSAGE_CREATE hay MESSAGE_READ.</p><p>Actions creator còn có một hiệu ứng phụ nữa, ông này biết tất cả các kiểu action . một dev mới vào tram chỉ cần mở file acrion creator lên là biết tất cả các action của hệ thống .</p><p>Once it has created the action message, the action creator passes that action off to the dispatcher.</p><p>khi ông này đánh máy xong, thông điệp sẽ được truyền đến Dispatcher.</p><h2>Dispatcher (thằng đưa thư)</h2><p>Thực chất Dispatcher bao gồm một loạt các đăng ký callback. giống như mông đưa thư, ông này giữ một danh sách các kho có thể nhận tin từu action creator. và chuyên thông điếp đến đó.</p><p><img src="8.png" alt><br>Ống này làm việc một cách không đồng bộ<br>đến tất cá các kho trong hệ thống, nếu bạn muốn thông điệp chir được gửi khi làm xong việc gì khácm bạn có thể quản lý dispatcher thực hiện chức năng này với hàm waitFor().</p><p>Dispatcher của Flux khác với dispatcher cưa các kiến trúc khác ở chỗ, thông điệp được gửi tới tất cả các kho không phân biệt action type là gì. điều đó có nghĩa tất cả các store đều nhận được cả các thông điệp và phải tự mình lịc xem mình cần nghe thưng thông điệp nào.</p><h2>The store (kho)</h2><p>Tiếp theo là store, store là nơi giữ tất cả các trạng thái của ứng dụng<br>, tất cả các trạng thái thay đổi logic đều nằm trong kho.</p><p>Store như một nhân viên kiểm soát kho vậy, tất cả các trạng thái phải thay đổi thông qua một củ thể, bạn không thể trực tiếp yêu cầu tahy đổi trạng thái được, đối tượng store sẽ không có setters mà chi có getters thôi. để thay dổi trạng thái bạn cần theo đúng trình tự… bạn cần tạo ra một action bằng acrion creator và gửi đi thông qua dispatcher.</p><p>Như đã đề cập ở trên, nếu Store đã đăng ký với dispatcher, mọi action sẽ được đến nó. bên trong mỗi store trường là một biểu thức switch phân loại acrion đầu vào thông qua type và thực hiện logic tương ứng. nếu action thuộc loại store quan tâm nó sẽ xứ lý action và trả lại một trạng thái tiếp theo của ứng ụng. nếu không store sẽ bỏ qua action này.</p><p>Một khi store đã cập nhật trạng thái, nó sẽ tung ra một sự kiện change, thông báo cho controller view rằng trạng thái đã bị thay đổi cần update lại.</p><h2>controller view và view</h2><p>View chính là giao diện ngưòi dùng, view được dựng dựa trên trạng thái, thể hiện trạng thái tới nhời dùng cũng như nhận tương tác của ngời dùng để tạo ra trạng thái mới.</p><p><img src="9.png" alt></p><p>View chỉ là giao diện, nó không hề biết gì về logic của ứng dụng, nó chỉ nhận lấy data và dựng thành giao diện ừng dùng có hể hiểu được (bằng HTML).</p><p>Controller view làm nhiệm vụ quản lý giữa store và view. Nó nhận lấy thông bao thay đổi trạng thái từ store. tập hợp những thay đổi và truyền trạng thái mới cho tất cả nhưng view nó quản lý.</p><p>So let’s take a look at how all of these characters work together.</p><p>Hãy xem qua mọi các thành phần làm việc với nhau thế nào nhé.</p><h1>các thành phần tương tấc như thế nào</h1><h2>Setup</h2><p>đầu tiên là phần setup: ứng đụng đưọc khởi tạo, việc vày chỉ dễn ra một lần.</p><ol><li>Store thông báo cho dispatcher mỗi khi có trạng thái thay đổi</li></ol><p><img src="10/png" alt></p><p>2.rồi controller views yều cầu trạng thái mới nhất từ store.</p><ol start="3"><li>Khi store gửi trạng thái cho controller views, controller views gửi trạng thái tới các view để dựng giao diện.</li></ol><p><img src="11.png" alt></p><ol start="4"><li><p>The controller views also ask the stores to keep them notified when state changes.</p></li><li><p>Controller views cũng đăng ký nhận thông báo khi trạng thái thay đổi.</p></li></ol><p><img src="12.png" alt></p><h2>Luồng dữ liệu</h2><p>Khi setup xong, ứng dụng sẽ sẵn sàng để nhận tương tác của người dùng, và mỗi khi có tương tác từ người dùng luồng dữ liệu sẽ bắt đầy chạy.</p><p>sự kiện từ hành từ tương tác sẽ được bắn ra.</p><p><img src="13.png" alt></p><ol><li>view thông báo cho action creator chuẩn bị một action mới.</li></ol><p><img src="14.png" alt></p><ol start="2"><li>action creator tạo ra action dựa trên tương tác và gỉư tới dispatcher.</li></ol><p><img src="15.png" alt></p><ol start="3"><li>Dispatcher giửi action tới store theo một hàng dợi (FIFO), mỗi store đều được thông báo với mọi action rồi store sẽ quết định có xử lý action hay không, và thay đổi trạng thái dựa vào đó.</li></ol><p><img src="16.png" alt></p><ol start="4"><li><p>Một khi trạnh thái đã thay đổi, store gửi thông báo đến các controllers đã đăng ký với nó.</p></li><li><p>những controller views này yêu cầu lấy state mới từ store và tiến hành cập nhật trạng thái mới.</p></li></ol><p><img src="17.png" alt></p><p>Hy vọng bài viết này giúp bạn hiểu hơn về Flux!</p><p>…<br>link bài viết gốc: <a href="https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207#.vchgyrnzh" target="_blank" rel="noopener">tại đây</a></p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small t-link" href="/tags/Flux/">Flux</a> <a class="tag tag--primary tag--small t-link" href="/tags/design-pattern/">design pattern</a> <a class="tag tag--primary tag--small t-link" href="/tags/fontend/">fontend</a> <a class="tag tag--primary tag--small t-link" href="/tags/framework/">framework</a> <a class="tag tag--primary tag--small t-link" href="/tags/javascript/">javascript</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/09/21/Viet-JS-theo-phong-cach-huong-module-phan-2/" data-tooltip="Viết JS theo phong cách hướng module - phần 2" aria-label="PREVIOUS: Viết JS theo phong cách hướng module - phần 2"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/06/viet-mot-chuong-trinh-cho-phep-cai-plugin-trong-java-nhu-the-nao/" data-tooltip="viết một chương trình cho phép cài plugin trong java như thế nào?" aria-label="NEXT: viết một chương trình cho phép cài plugin trong java như thế nào?"><span class="hide-xs hide-sm text-small icon-mr">NEXT</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/08/07/Flux-la-cai-quai-gi-nhi/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2016/08/07/Flux-la-cai-quai-gi-nhi/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2016/08/07/Flux-la-cai-quai-gi-nhi/" title="Share on Google+" aria-label="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Back to top"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></article><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2019 Minh Luc. All Rights Reserved.</span></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="4"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/09/21/Viet-JS-theo-phong-cach-huong-module-phan-2/" data-tooltip="Viết JS theo phong cách hướng module - phần 2" aria-label="PREVIOUS: Viết JS theo phong cách hướng module - phần 2"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/06/viet-mot-chuong-trinh-cho-phep-cai-plugin-trong-java-nhu-the-nao/" data-tooltip="viết một chương trình cho phép cài plugin trong java như thế nào?" aria-label="NEXT: viết một chương trình cho phép cài plugin trong java như thế nào?"><span class="hide-xs hide-sm text-small icon-mr">NEXT</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/08/07/Flux-la-cai-quai-gi-nhi/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2016/08/07/Flux-la-cai-quai-gi-nhi/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2016/08/07/Flux-la-cai-quai-gi-nhi/" title="Share on Google+" aria-label="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Back to top"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div><div id="share-options-bar" class="share-options-bar" data-behavior="4"><i id="btn-close-shareoptions" class="fa fa-times"></i><ul class="share-options"><li class="share-option"><a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/08/07/Flux-la-cai-quai-gi-nhi/" aria-label="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=/2016/08/07/Flux-la-cai-quai-gi-nhi/" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="https://plus.google.com/share?url=/2016/08/07/Flux-la-cai-quai-gi-nhi/" aria-label="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span></a></li></ul></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70" alt="Author&#39;s picture"><h4 id="about-card-name">Minh Luc</h4><div id="about-card-bio"><p>author.bio</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>author.job</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>Hanoi, Vietnam</div></div></div><div id="cover" style="background-image:url(/assets/images/cover-v1.2.0.jpg)"></div><script src="/assets/js/script-v5hftjqfholivslt8zs7notwx80qctz8sotsfl1pxlrg8swcj6ncpoq2rqih.min.js"></script></body></html>