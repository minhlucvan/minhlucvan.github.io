<!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Minh Luc&#39;s Blog"><title>NOSQL có đồng nghĩa với NO Ijection? - Minh Luc&#39;s Blog</title><meta name="author" content="Minh Luc"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Minh Luc","sameAs":["https://github.com/minhlucvan","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/minhlucvan.3","https://plus.google.com/","https://www.linkedin.com/profile/","mailto:luk.mink@gmail.com"],"image":"https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&sh=600&sm=fit&q=70"},"articleBody":"Chắc hẳn chúng ta đã khá quen thuộc với khái niệm SQL Injection đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại database mới như graph database và NoSql đã làm phong phú hơn lựa chọn dataabase của các dự án phàn mềm.Chắc hẳn chúng ta đã khá quen thuộc với khái niệm SQL Injection đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại database mới như graph database và NoSql đã làm phong phú hơn lựa chọn dataabase của các dự án phàn mềm.Với những ưu điểm của mình như:Mã nguồn mởkhả năng mở rộng linh hoạtPhù hợp với điện toán đám mây và bigData.các csld NoSql như MongoDb hay redis là những lựa chọn đáng để cân nhắc với những hệ thống lớn, những một khía cạnh có lẽ không được nhắc đến nhất là ở Việ Nam mình đó chính là tính bảo mật của những csld này, cuối tuần rảnh rỗi sinh nông nổi mình quyết định viết một bài để đánh giá tính bảo mật của csld NoSQL.Trước khi bắt đầu để tránh gạch đá mình xin làm rõ một vắn để là bản thân CSLD chỉ là: “một tập hợp thông tin có cấu trúc. Tuy nhiên, thuật ngữ này thường dùng trong công nghệ thông tin và nó thường được hiểu rõ hơn dưới dạng một tập hợp liên kết các dữ liệu, thường đủ lớn để lưu trên một thiết bị lưu trữ như đĩa hay băng. Dữ liệu này được duy trì dưới dạng một tập hợp các tập tin trong hệ điều hành hay được lưu trữ trong các hệ quản trị cơ sở dữ liệu.” vậy nên nếu vọi vàng đánh giá csld này an toàn csld kia không an toàn chưa hẳn đã chính xác mà một nhân tố vô cùng quan trọng nữa là hện quản trị CSDL (HQTCSDL) ta sử dụng cũng như driver mà ta sử dụng để giao tiếp với HQTCSDL, nội bài biết này mình sẽ giới thiệu một bài lỗ hổng thường gặp trong các HQTCSDL NoSQL., mà cụ thể là MongoDb HQTCCSDL NoSQL phổ biến nhất hiện nay.Cơ Chế Hoạt ĐộngNgay trên trang MongoDB Developer FAQ có nói:“… with MongoDB we are not building queries from strings, so traditional SQL injection attacks are not a problem.”tức là MongoDb có thể tránh được tất cả các loại SQL injection truyển thống, thay vào đó các hacker lại sự dụng một ký thuật đặc thù cho NoSql đó là NoSQL Injection.cũng như SQL injection để có thể thực hiện NoSQL Injection hacker cũng phải truy vấn lên server, dựa vào request từ client server sẽ truy vấn đến Database và nhận lại kết quả từ database để trả cho client. Nhiệm vụ của hacker là phải làm sao để hiểu sai request dẫn đến thực hiện một câu truy vấn không mong muốn đến database cuối cùng hacker sẽ lấy được thông tin mong mốn hoặc ngiêm trọng hơn là tthay đổi thậm chí là xóa dự liệu trong csdl.điểm khác của NoSQL Injection so với SQL Injection truyển thống là:câu truy vấn cho khối dữ liệu không cấu trúc.các HQTCSDL rất đa dạng và khác biệ nhau khá nhiều trong cachs tổ chức dữ liệu cũng như truy vấn.cho phép truy cập trực tiếp client-database thông qua RESTfull API.Các Loại Tấn Côngcó 3 loại tấn công **NoSQL Injection chủ yêu là:Login bypass for MongoDB on PHP and NodeJSString concatenationEscaping flaws of drivers1. LOGIN BYPASSđây là loại tấn công rất nguy hiểm vì hacker có thể bỏ qua quy trình đăng nhập và giành quên một cách không mất khó khăn.giả sử ta có một đoạn login sử dụng NodeJs - express.js - mongodb như sau:12345// NodeJS with Express.jsdb.collection('users').find(&#123;\"user\": req.query.user,\"password\": req.query.password&#125;);ở đây ta sử dụng luôn tham số trong request của client để thuwchj hiện câu truy vấn đên database. với dự đoán than số mà người dùng gửi lên sẽ dạng như này:✔ https://example.org/login?user=patrick&amp;password=1234trong trường hợp này nếu ông hacker vui tính nào đó gửi lên một request dang như này thì chuyện gì sẽ sảy ra:⚡ https://example.org/login?user=patrick&amp;password[%24ne]=khi đó câu query của chúng ta sẽ như thế này12345// NodeJS with Express.jsdb.collection('users').find(&#123;\"user\": \"patrick\",\"password\": &#123;\"&amp;ne\": \"\"&#125;&#125;);serlector &amp;ne (not equals) sẽ tìm những bản gì khong bằng giá trị “” tức là trường password sẽ luôn luôn true, hacker đã by pass thanh công.2. String ConcatTương tự như SQL Injection vấn đề nối chuỗi (string concat) vẫn là một vấn đề, nếu dev code cẩu thả thì hacker có thể lợi dụng để injectect những đoạn ký tự đặc biệt làm câu query bị thực thui sai mục địch.vẫn là chức năng đăng nhập trên làn này ta chọn một cách cài đặt khác như sau:12// nodejs examplevar string query = “&#123; username: ‘“ + user + “’, password: ‘” + password + “’ &#125;”một đoạn có trông có vẻ ngây thơ vô tội nhỉ? nhưng với hacker thì đây đúng là một cơ hội vàng.⚡ https://example.org/login?username=admin’, $or: [ {}, { ‘a’:’a&amp;password=’ } ], $comment:’hacked’với request trên câu query của chúng ta sẽ biến thành thế này:12&#123; username: ‘tolkien’ , $or: [ &#123;&#125;, &#123; ‘a’: ‘a’, password: ‘’ &#125; ], $comment: ‘hacked’ &#125;OMG, một lần nữa chúng ta đã bypass được login với biểu thức toán tử $or : [true, false ] sex trar laij keets quar true 😄Ngoài ra còn khá nhiều kỹ thuật tấn công khác nếu hứng thú anh em có thể hỏi bác gut gồ nhé.MinhLucVan 09-07-2017","dateCreated":"2016-12-06T15:33:53+07:00","dateModified":"2019-10-13T22:55:53+07:00","datePublished":"2016-12-06T15:33:53+07:00","description":"Chắc hẳn chúng ta đã khá quen thuộc với khái niệm SQL Injection đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại database mới như graph database và NoSql đã làm phong phú hơn lựa chọn dataabase của các dự án phàn mềm.","headline":"NOSQL có đồng nghĩa với NO Ijection?","image":["database-injection.jpg","jsql-injection-1000x571.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/"},"publisher":{"@type":"Organization","name":"Minh Luc","sameAs":["https://github.com/minhlucvan","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/minhlucvan.3","https://plus.google.com/","https://www.linkedin.com/profile/","mailto:luk.mink@gmail.com"],"image":"https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&sh=600&sm=fit&q=70","logo":{"@type":"ImageObject","url":"https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&sh=600&sm=fit&q=70"}},"url":"/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/","keywords":"sercurity, database, nosql","thumbnailUrl":"database-injection.jpg"}</script><meta name="description" content="Chắc hẳn chúng ta đã khá quen thuộc với khái niệm SQL Injection đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại da"><meta name="keywords" content="sercurity,database,nosql"><meta property="og:type" content="blog"><meta property="og:title" content="NOSQL có đồng nghĩa với NO Ijection?"><meta property="og:url" content="/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/index.html"><meta property="og:site_name" content="Minh Luc&#39;s Blog"><meta property="og:description" content="Chắc hẳn chúng ta đã khá quen thuộc với khái niệm SQL Injection đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại da"><meta property="og:locale" content="vi"><meta property="og:image" content="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/8wv4as2wkw_Untitled.png"><meta property="og:image" content="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/oweob0dteu_Bypass-Login-sql-injection.png"><meta property="og:updated_time" content="2019-10-13T15:55:53.534Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="NOSQL có đồng nghĩa với NO Ijection?"><meta name="twitter:description" content="Chắc hẳn chúng ta đã khá quen thuộc với khái niệm SQL Injection đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại da"><meta name="twitter:image" content="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/8wv4as2wkw_Untitled.png"><meta name="twitter:creator" content="@minhlucvan"><meta property="og:image" content="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70"><meta property="og:image" content="/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/database-injection.jpg"><meta class="swiftype" name="image" data-type="enum" content="/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/database-injection.jpg"><meta property="og:image" content="/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/jsql-injection-1000x571.jpg"><meta class="swiftype" name="image" data-type="enum" content="/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/jsql-injection-1000x571.jpg"><link rel="stylesheet" href="/assets/css/style-bovqpop6a0hj2vbxlebkrmhngp7j059lnqsseyivz03zkcmhvo2cwn5mhndg.min.css"></head><body><div id="blog"><header id="header" data-behavior="4"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">Minh Luc&#39;s Blog</a></div><a class="header-right-picture" href="#about" aria-label="Open the link: /#about"><img class="header-picture" src="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70" alt="Author&#39;s picture"></a></header><nav id="sidebar" data-behavior="4"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="Read more about the author"><img class="sidebar-profile-picture" src="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70" alt="Author&#39;s picture"></a><h4 class="sidebar-profile-name">Minh Luc</h4><h5 class="sidebar-profile-bio"><p>author.bio</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" title="Home"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">Home</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/categories" title="Categories"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">Categories</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/tags" title="Tags"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">Tags</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/archives" title="Archives"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">Archives</span></a></li><li class="sidebar-button"><a class="sidebar-button-link open-algolia-search" href="#search" title="Search"><i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i> <span class="sidebar-button-desc">Search</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/about" title="About"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">About</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/minhlucvan" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="http://stackoverflow.com/users" title="Stack Overflow"><i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i> <span class="sidebar-button-desc">Stack Overflow</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://twitter.com/" title="Twitter"><i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i> <span class="sidebar-button-desc">Twitter</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://facebook.com/minhlucvan.3" title="Facebook"><i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i> <span class="sidebar-button-desc">Facebook</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://plus.google.com/" title="Google +"><i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i> <span class="sidebar-button-desc">Google +</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://www.linkedin.com/profile/" title="LinkedIn"><i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i> <span class="sidebar-button-desc">LinkedIn</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto:luk.mink@gmail.com" title="Mail"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">Mail</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/atom.xml" title="RSS"><i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i> <span class="sidebar-button-desc">RSS</span></a></li></ul></div></nav><div class="post-header-cover text-left" style="background-image:url(/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/jsql-injection-1000x571.jpg)" data-behavior="4"></div><div id="main" data-behavior="4" class="hasCover hasCoverMetaOut hasCoverCaption"><article class="post"><span class="post-header-cover-caption caption">nosql injection</span><div class="post-header main-content-wrap text-left"><h1 class="post-title">NOSQL có đồng nghĩa với NO Ijection?</h1><div class="post-meta"><time datetime="2016-12-06T15:33:53+07:00">Th12 06, 2016 </time><span>in </span><a class="category-link" href="/categories/chuyen-nghe/">chuyện nghề</a></div></div><div class="post-content markdown"><div class="main-content-wrap"><p>Chắc hẳn chúng ta đã khá quen thuộc với khái niệm <strong><code>SQL Injection</code></strong> đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại database mới như <strong><code>graph database</code></strong> và <strong><code>NoSql</code></strong> đã làm phong phú hơn lựa chọn dataabase của các dự án phàn mềm.</p><a id="more"></a><p>Chắc hẳn chúng ta đã khá quen thuộc với khái niệm <strong><code>SQL Injection</code></strong> đây là một lỗi hổng phổ biến nhất cũng như nguy hiểm nhất với các trang web trên Internet. “Gần đây” với sự phất triển của những loại database mới như <strong><code>graph database</code></strong> và <strong><code>NoSql</code></strong> đã làm phong phú hơn lựa chọn dataabase của các dự án phàn mềm.</p><p>Với những ưu điểm của mình như:</p><ul><li>Mã nguồn mở</li><li>khả năng mở rộng linh hoạt</li><li>Phù hợp với điện toán đám mây và bigData.</li></ul><p>các csld NoSql như <code>MongoDb</code> hay <code>redis</code> là những lựa chọn đáng để cân nhắc với những hệ thống lớn, những một khía cạnh có lẽ không được nhắc đến nhất là ở Việ Nam mình đó chính là tính bảo mật của những csld này, cuối tuần rảnh rỗi sinh nông nổi mình quyết định viết một bài để đánh giá tính bảo mật của csld <strong><code>NoSQL</code></strong>.</p><p>Trước khi bắt đầu để tránh gạch đá mình xin làm rõ một vắn để là bản thân CSLD chỉ là: “một tập hợp thông tin có cấu trúc. Tuy nhiên, thuật ngữ này thường dùng trong công nghệ thông tin và nó thường được hiểu rõ hơn dưới dạng một tập hợp liên kết các dữ liệu, thường đủ lớn để lưu trên một thiết bị lưu trữ như đĩa hay băng. Dữ liệu này được duy trì dưới dạng một tập hợp các tập tin trong hệ điều hành hay được lưu trữ trong các hệ quản trị cơ sở dữ liệu.” vậy nên nếu vọi vàng đánh giá csld này an toàn csld kia không an toàn chưa hẳn đã chính xác mà một nhân tố vô cùng quan trọng nữa là hện quản trị CSDL (HQTCSDL) ta sử dụng cũng như driver mà ta sử dụng để giao tiếp với HQTCSDL, nội bài biết này mình sẽ giới thiệu một bài lỗ hổng thường gặp trong các HQTCSDL NoSQL., mà cụ thể là <strong><code>MongoDb</code></strong> HQTCCSDL NoSQL phổ biến nhất hiện nay.</p><h3>Cơ Chế Hoạt Động</h3><p>Ngay trên trang <a href="https://www.mongodb.com/blog/post/securing-mongodb-part-4-environmental-control-and-database-management" target="_blank" rel="noopener">MongoDB Developer FAQ</a> có nói:</p><blockquote><p>“… with MongoDB we are not building queries from strings, so traditional SQL injection attacks are not a problem.”</p></blockquote><p>tức là MongoDb có thể tránh được tất cả các loại SQL injection truyển thống, thay vào đó các hacker lại sự dụng một ký thuật đặc thù cho NoSql đó là <strong><code>NoSQL Injection</code></strong>.<img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/8wv4as2wkw_Untitled.png" alt="alt text"></p><p>cũng như <strong><code>SQL injection</code></strong> để có thể thực hiện <strong><code>NoSQL Injection</code></strong> hacker cũng phải truy vấn lên server, dựa vào request từ client server sẽ truy vấn đến Database và nhận lại kết quả từ database để trả cho client. Nhiệm vụ của hacker là phải làm sao để hiểu sai request dẫn đến thực hiện một câu truy vấn không mong muốn đến database cuối cùng hacker sẽ lấy được thông tin mong mốn hoặc ngiêm trọng hơn là tthay đổi thậm chí là xóa dự liệu trong csdl.</p><p>điểm khác của <strong><code>NoSQL Injection</code></strong> so với <strong><code>SQL Injection</code></strong> truyển thống là:</p><ul><li>câu truy vấn cho khối dữ liệu không cấu trúc.</li><li>các HQTCSDL rất đa dạng và khác biệ nhau khá nhiều trong cachs tổ chức dữ liệu cũng như truy vấn.</li><li>cho phép truy cập trực tiếp client-database thông qua RESTfull API.</li></ul><h3>Các Loại Tấn Công</h3><p>có 3 loại tấn công **<code>NoSQL Injection</code> chủ yêu là:</p><ul><li>Login bypass for MongoDB on PHP and NodeJS</li><li>String concatenation</li><li>Escaping flaws of drivers</li></ul><h4>1. LOGIN BYPASS</h4><p>đây là loại tấn công rất nguy hiểm vì hacker có thể bỏ qua quy trình đăng nhập và giành quên một cách không mất khó khăn.</p><p><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/oweob0dteu_Bypass-Login-sql-injection.png" alt="alt text"></p><p>giả sử ta có một đoạn login sử dụng NodeJs - express.js - mongodb như sau:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NodeJS with Express.js</span></span><br><span class="line">db.collection(<span class="string">'users'</span>).find(&#123;</span><br><span class="line"><span class="string">"user"</span>: req.query.user,</span><br><span class="line"><span class="string">"password"</span>: req.query.password</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ở đây ta sử dụng luôn tham số trong request của client để thuwchj hiện câu truy vấn đên database. với dự đoán than số mà người dùng gửi lên sẽ dạng như này:</p><p><code>✔ https://example.org/login?user=patrick&amp;password=1234</code><br>trong trường hợp này nếu ông hacker vui tính nào đó gửi lên một request dang như này thì chuyện gì sẽ sảy ra:<br><code>⚡ https://example.org/login?user=patrick&amp;password[%24ne]=</code></p><p>khi đó câu query của chúng ta sẽ như thế này</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NodeJS with Express.js</span></span><br><span class="line">db.collection(<span class="string">'users'</span>).find(&#123;</span><br><span class="line"><span class="string">"user"</span>: <span class="string">"patrick"</span>,</span><br><span class="line"><span class="string">"password"</span>: &#123;<span class="string">"&amp;ne"</span>: <span class="string">""</span>&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>serlector <code>&amp;ne</code> (not equals) sẽ tìm những bản gì khong bằng giá trị “” tức là trường password sẽ luôn luôn true, hacker đã by pass thanh công.</p><h3>2. String Concat</h3><p>Tương tự như <strong><code>SQL Injection</code></strong> vấn đề nối chuỗi (string concat) vẫn là một vấn đề, nếu dev code cẩu thả thì hacker có thể lợi dụng để injectect những đoạn ký tự đặc biệt làm câu query bị thực thui sai mục địch.</p><p>vẫn là chức năng đăng nhập trên làn này ta chọn một cách cài đặt khác như sau:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nodejs example</span></span><br><span class="line"><span class="keyword">var</span> string query = “&#123; <span class="attr">username</span>: ‘“ + user + “’, <span class="attr">password</span>: ‘” + password + “’ &#125;”</span><br></pre></td></tr></table></figure><p>một đoạn có trông có vẻ ngây thơ vô tội nhỉ? nhưng với hacker thì đây đúng là một cơ hội vàng.</p><p><code>⚡ https://example.org/login?username=admin’, $or: [ {}, { ‘a’:’a&amp;password=’ } ], $comment:’hacked’</code></p><p>với request trên câu query của chúng ta sẽ biến thành thế này:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123; <span class="attr">username</span>: ‘tolkien’ , <span class="attr">$or</span>: [ &#123;&#125;, &#123; ‘a’: ‘a’, <span class="attr">password</span>: ‘’ &#125; ], <span class="attr">$comment</span>: ‘hacked’ &#125;</span><br></pre></td></tr></table></figure><p>OMG, một lần nữa chúng ta đã bypass được login với biểu thức toán tử <code>$or : [true, false ]</code> sex trar laij keets quar true 😄</p><p>Ngoài ra còn khá nhiều kỹ thuật tấn công khác nếu hứng thú anh em có thể hỏi bác gut gồ nhé.</p><p>MinhLucVan 09-07-2017</p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small t-link" href="/tags/database/">database</a> <a class="tag tag--primary tag--small t-link" href="/tags/nosql/">nosql</a> <a class="tag tag--primary tag--small t-link" href="/tags/sercurity/">sercurity</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/12/15/Thoc-sau-vao-JS-Null-vs-undefined/" data-tooltip="Thọc sâu vào JS: Null vs undefined" aria-label="PREVIOUS: Thọc sâu vào JS: Null vs undefined"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/11/29/Callback-hell-va-nhung-cach-giai-quet/" data-tooltip="Callback hell và những cách giải quết" aria-label="NEXT: Callback hell và những cách giải quết"><span class="hide-xs hide-sm text-small icon-mr">NEXT</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" title="Share on Google+" aria-label="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Back to top"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></article><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2019 Minh Luc. All Rights Reserved.</span></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="4"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/12/15/Thoc-sau-vao-JS-Null-vs-undefined/" data-tooltip="Thọc sâu vào JS: Null vs undefined" aria-label="PREVIOUS: Thọc sâu vào JS: Null vs undefined"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2016/11/29/Callback-hell-va-nhung-cach-giai-quet/" data-tooltip="Callback hell và những cách giải quết" aria-label="NEXT: Callback hell và những cách giải quết"><span class="hide-xs hide-sm text-small icon-mr">NEXT</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" title="Share on Google+" aria-label="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Back to top"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div><div id="share-options-bar" class="share-options-bar" data-behavior="4"><i id="btn-close-shareoptions" class="fa fa-times"></i><ul class="share-options"><li class="share-option"><a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" aria-label="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="https://plus.google.com/share?url=/2016/12/06/NOSQL-co-dong-nghia-voi-NO-Ijection/" aria-label="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span></a></li></ul></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="https://www.buildabear.com/dw/image/v2/BBNG_PRD/on/demandware.static/-/Sites-buildabear-master/default/dwdfa7c1cf/27618_27630_25342_24630x.jpg?sw=600&amp;sh=600&amp;sm=fit&amp;q=70" alt="Author&#39;s picture"><h4 id="about-card-name">Minh Luc</h4><div id="about-card-bio"><p>author.bio</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>author.job</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>Hanoi, Vietnam</div></div></div><div id="cover" style="background-image:url(/assets/images/cover-v1.2.0.jpg)"></div><script src="/assets/js/script-iyxwujylwxmhnd5olrnh4uuis9yzfnjq8zndtmdg7bdpuidg293sji0zispp.min.js"></script></body></html>